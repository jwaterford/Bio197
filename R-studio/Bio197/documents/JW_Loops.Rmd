---
title: "JW_Loops"
author: "James Waterford"
date: "2023-04-06"
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
library(dplyr)
knitr::opts_chunk$set(echo = TRUE)
```

## Loops

Loops, not dissimilar to those in Python, help you iterate a task for a given set of intervals.
For loops are another way that we can tell a computer to repeat tasks for us. They are versatile and very explicit, so that means that we are controlling everything that is run on each iteration of the loop (mostly).


The general structure: 
  `for ([value] in [list]) {
    do_something_with(values) 
  }`

```{r Practice 1}
lengths <- c(13.3,15,100)

for (value in lengths) {
  mass <- 0.73 * value^2
  print(mass)
  ## `return()` does not work in loops ##
}
```

```{r Practice 2}
mass_lbs <- c(2.2,3.5,9.6,1.2)
for (mass_lb in mass_lbs) {
  mass_kg = mass_lb* 2.2
  print(mass_kg)
}
```

What is an index in R?
It is the numeric position of values inside any data structre in R.
We can use indexes to sort through the full length of a 
```{r}
birds <- c('robin', 'woodpecker', 'blue_jay', 'sparrow')
for (i in 1:length(birds)){
  print(birds[i])
}
```
How do we save the results from a For Loop?
When using `vector()`, we don't need insert the mode or length
```{r}
flowers <- c("daises","lilacs","lillies")
my_results <- vector(mode = "character", length = length(flowers))
for (i in 1:length(flowers)) {
  upper <- toupper(flowers[i])
  my_results[i] <-(upper)
}
my_results
```


```{r}
lengths <- c(1.1, 2.2, 1.6)
widths <- c(3.5, 2.4, 2.8)
areas <- vector(mode = "numeric", length = length(lengths))
for (i in 1:length(lengths)) {
  areas[i] <- lengths[i] * widths[i]
}
areas
```

```{r}
#1#

dino_dat <- read.csv("../197-raw_storage/dinosaur_lengths.csv")

get_mass_from_length_by_name <- function(length,name){
  if(name == "Stegosauria") {
    a = 10.95
    b = 2.64
  } else if (name == "Theropoda") {
    a = 0.73
    b = 3.63
  } else if (name == "Sauropoda") {
    a = 214.44
    b = 1.46
  } else {
    a = 25.37
    b = 2.49
  }
  mass <- a * length^b
  return(mass)
}

#2#
dino_dat %>% 
  rowwise() %>% 
get_mass_from_length_by_name(lengths,name=species)

#3#

head(dino_dat)
dino_dat$mass <- results

#4#

dino_dat %>% 
  group_by(species) %>% 
  summarize(mean_mass = (sum(mass)/length(lengths)))

```

```{r}
library(ggplot2)
#download.file(url = "http://www.datacarpentry.org/semester-biology/data/individual_collar_data.zip.", destfile =  "../197-raw_storage/individal_collars.zip")

file <- unzip("../197-raw_storage/individual_collar_data.zip")
list.files(pattern = "collar-data-.*.txt") -> cfiles

reader <- function(filelist) {

  for (i in 1:length(filelist)) {
  read.csv(filelist[i]) -> data_grab
  ggplot(data = data_grab, mapping = aes(x=long, y=lat)) +
    geom_path() +
      ggtitle(filelist[i]) 
  ggsave(paste0("plot_",i,".pdf"), device = "pdf")
  }
  
}
reader(filelist = cfiles)

```

```{r}
reader <- function(filelist) {

  for (i in 1:length(filelist)) {
  read.csv(filelist[i]) -> data_grab
  ggplot(data = data_grab, mapping = aes(x=long, y=lat)) +
    geom_path() +
      ggtitle(filelist[i]) -> test
  print(test)
  }
  
}
reader(filelist = cfiles)
```

Add code to the loop to calculate the minimum and maximum latitude in the file, and store these values, along with the name of the file, in a data frame. Show the data frame as output

```{r}

reader <- function(filelist) {

  for (i in 1:length(filelist)) {
  read.csv(filelist[i]) -> data_grab
  ggplot(data = data_grab, mapping = aes(x=long, y=lat)) +
    geom_path() +
      ggtitle(filelist[i]) -> test
  print(test)
  }
  
}
reader(filelist = cfiles)
```


`Use '!' to embed a plot`
`![title](address)`
`Use knitr package to add fig_chunk`
<!-- ![A nice plot.](`r knitr::include_graphics('plot_1', 'pdf')`) -->


